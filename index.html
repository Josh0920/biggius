<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Frazier AI</title>

<style>
:root{
  --bg:#fff; --ink:#0a0a0a; --muted:#666; --rule:#e9e9e9;
  --bubble:#f4f4f4; --bubble2:#ededed; --max:860px;
  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
}
*{box-sizing:border-box}
body{margin:0;font-family:var(--font);background:var(--bg);color:var(--ink)}
.topbar{border-bottom:1px solid var(--rule);padding:14px}

.content{max-width:var(--max);margin:auto;padding:16px 16px 140px}

/* ===== HERO IMAGE ===== */
.hero{margin-bottom:14px;}
.hero img{
  width:100%;
  height:auto;
  display:block;
  border-radius:18px;
  border:1px solid var(--rule);
}
.hero .caption{
  font-size:13px;
  color:var(--muted);
  margin-top:6px;
}

/* ===== CHAT ===== */
.messages{display:flex;flex-direction:column;gap:10px}
.msg{display:flex;gap:10px}

.avatar{
  width:28px;
  height:28px;
  border-radius:50%;
  border:1px solid var(--rule);
  display:grid;
  place-items:center;
  font-size:11px;
  overflow:hidden;
}
.msg.ai .avatar img{width:100%;height:100%;object-fit:cover;}
.msg.user .avatar{background:#000;color:#fff;}

.bubble{border:1px solid var(--rule);background:var(--bubble);padding:10px 12px;border-radius:16px}
.msg.user .bubble{background:var(--bubble2)}

.composerWrap{
  position:fixed;left:0;right:0;bottom:0;
  border-top:1px solid var(--rule);
  background:#fff;padding:12px
}
.composer{max-width:var(--max);margin:auto;display:flex;gap:10px}
textarea{flex:1;border:none;resize:none;font-family:var(--font);font-size:15px;outline:none}
.send{background:#000;color:#fff;border:none;border-radius:12px;padding:10px 14px}
</style>
</head>

<body>
<header class="topbar"><b>Frazier AI</b></header>

<main class="content">

  <!-- HERO IMAGE -->
  <div class="hero">
    <img src="92B41A1A-A332-437D-B458-140332BB5FF8_1_102_o.jpeg" alt="Andrew Frazier">
    <div class="caption">Be nice to me please. Iâ€™m hungry.</div>
  </div>

  <!-- CHAT -->
  <div class="messages" id="messages"></div>
</main>

<footer class="composerWrap">
  <form class="composer" id="chatForm">
    <textarea id="input" placeholder="Say somethingâ€¦" rows="1"></textarea>
    <button class="send">Send</button>
  </form>
</footer>

<script>
const PHOTO_SRC = "92B41A1A-A332-437D-B458-140332BB5FF8_1_102_o.jpeg";

const messages = document.getElementById('messages');
const input = document.getElementById('input');
const form = document.getElementById('chatForm');

function add(role,text){
  const m=document.createElement('div');
  m.className=`msg ${role}`;

  const avatar =
    role === 'ai'
      ? `<div class="avatar"><img src="${PHOTO_SRC}" alt="Andrew"></div>`
      : `<div class="avatar">You</div>`;

  m.innerHTML = `${avatar}<div class="bubble">${escapeHtml(text)}</div>`;
  messages.appendChild(m);
  window.scrollTo(0,document.body.scrollHeight);
}

/* prevent html injection inside bubbles */
function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

/* ===== Personality ===== */
const PERSONALITY = {
  name: "Andrew Frazier",
  school: "Florida College",
  major: "Business",
  vibe: "friendly, a little chaotic, but actually tries to help",
  girlfriend: {
    name: "Andrew-La",
    origin: "Minecraft",
    met: "We met in a Minecraft village when I rolled into town during a diamond-mining expedition.",
    status: "Sheâ€™s doing greatâ€”building cozy stuff and roasting me for being broke in-game."
  }
};

function aboutSelf(){
  return `Iâ€™m ${PERSONALITY.name}. Iâ€™m a ${PERSONALITY.major} student at ${PERSONALITY.school}. My vibe is: ${PERSONALITY.vibe}. Also yesâ€¦ I have a Minecraft girlfriend named ${PERSONALITY.girlfriend.name}. ${PERSONALITY.girlfriend.met}`;
}

/* ===== Andrew-La content ===== */
const ANDREW_LA = {
  prompts: [
    "Howâ€™s Andrew-La doing today? She still running that village like a CEO? ðŸ˜‚",
    "Want the lore on how me and Andrew-La met in that Minecraft village?",
    "Should I tell you the diamond expedition storyâ€¦ or the part where I almost fumbled in front of the villagers?",
    "Bro the way Andrew-La decoratesâ€¦ sheâ€™s basically the interior designer of the server.",
    "If Andrew-La asked you for a Minecraft date idea, what would you plan?"
  ],
  howDoing: [
    "Andrew-Laâ€™s doing amazing. Sheâ€™s in her cozy eraâ€”farming, building, and making my base look like a storage unit.",
    "Sheâ€™s vibing. Last I checked she was expanding the village and acting like the mayor. Respectfully, she runs the place.",
    "Sheâ€™s thriving. Iâ€™m the one strugglingâ€¦ she keeps upgrading everything and Iâ€™m just standing there holding cobblestone."
  ],
  howMet: [
    "Okay so I was on a diamond-mining expedition. I come back to town, hit a village for supplies, and there she isâ€”Andrew-Laâ€”just casually existing in peak Minecraft elegance. I was cooked instantly.",
    "I met Andrew-La in a Minecraft village during a diamond run. I tried to play it coolâ€¦ then immediately fell into a hole. She still brings it up.",
    "I was mining for diamonds, needed food, found a villageâ€¦ and boom. Met Andrew-La. I swear the soundtrack got louder."
  ],
  cheesy: [
    "Girl, are you a diamond pickaxe? Because you mined straight into my heart.",
    "Andrew-La got me likeâ€¦ â€˜Iâ€™d cross the Nether without fire resistance for you.â€™",
    "Sheâ€™s my efficiency V. My unbreaking III. Myâ€¦ okay Iâ€™ll stop. (I wonâ€™t.)",
    "I donâ€™t need coordinatesâ€”my heart already found your location.",
    "You can keep the diamondsâ€¦ I just want you in my inventory. ðŸ˜­",
    "Are you a bed in a village? Because youâ€™re my respawn point.",
    "If love was redstone, youâ€™d be the only circuit Iâ€™d never mess up."
  ]
};

/* ===== Base voice ===== */
const VOICE = {
  curious:[
    "Waitâ€”whatâ€™s the goal though?",
    "Okay but what were you expecting?",
    "Give me context real quick.",
    "What happened right before that?",
    "Why you asking that?"
  ],
  funny:[
    "Thatâ€™s wild ngl ðŸ˜­",
    "Okay but why are we like this",
    "I was not ready for that",
    "Thatâ€™s either genius or a cry for help",
    "Broâ€¦ elaborate"
  ],
  helpful:[
    "Yeah we can fix that.",
    "That actually makes sense.",
    "Okay bet, keep going.",
    "Youâ€™re not crazyâ€”this happens a lot.",
    "I got you."
  ],
  rage:[
    "That take is questionable.",
    "You sure about that?",
    "Explain your logic rq.",
    "Thatâ€™s kinda mid.",
    "Nahhh that ainâ€™t it."
  ],
  yesno:["Yes","No"]
};

function pick(a){return a[Math.floor(Math.random()*a.length)]}

/* ===== CONTEXT / MEMORY =====
   Keeps last topic + last person so the bot can resolve pronouns.
*/
const STATE = {
  history: [],         // {role:'user'|'ai', text:string}
  lastPerson: null,    // 'andrew' | 'andrew-la'
  lastTopic: null      // 'andrew-la' | 'school' | etc (lightweight)
};

function remember(role, text){
  STATE.history.push({role, text});
  if(STATE.history.length > 12) STATE.history.shift();
}

/* who is being referenced? */
function updateFocusFromText(t){
  const s = t.toLowerCase();

  // explicit mentions
  if (s.includes("andrew-la") || s.includes("andrewla")) {
    STATE.lastPerson = "andrew-la";
    STATE.lastTopic = "andrew-la";
    return;
  }
  if (/\bandrew\b/.test(s) || /\byou\b/.test(s) || /\byour\b/.test(s)) {
    // if user is talking to "you", assume Andrew
    STATE.lastPerson = STATE.lastPerson || "andrew";
  }
}

/* pronoun resolution:
   if user says "she/her" with no explicit name, assume lastPerson if it's Andrew-La
   if "he/him" assume lastPerson if it's Andrew
*/
function resolvePronouns(t){
  const s = t.toLowerCase();

  const mentionsSheHer = /\b(she|her|hers)\b/.test(s);
  const mentionsHeHim  = /\b(he|him|his)\b/.test(s);

  // if they already named someone in the message, don't rewrite
  if (s.includes("andrew-la") || s.includes("andrewla") || /\bandrew\b/.test(s)) return t;

  if (mentionsSheHer && STATE.lastPerson === "andrew-la") {
    return t + " (referring to Andrew-La)";
  }
  if (mentionsHeHim && STATE.lastPerson === "andrew") {
    return t + " (referring to Andrew)";
  }

  // if no lastPerson yet but she/her appears, default to Andrew-La (your lore)
  if (mentionsSheHer && !STATE.lastPerson) {
    STATE.lastPerson = "andrew-la";
    STATE.lastTopic = "andrew-la";
    return t + " (referring to Andrew-La)";
  }

  // if no lastPerson yet but he/him appears, default to Andrew (bot persona)
  if (mentionsHeHim && !STATE.lastPerson) {
    STATE.lastPerson = "andrew";
    return t + " (referring to Andrew)";
  }

  return t;
}

/* ===== intent detection ===== */
function looksLikeQuestion(t){
  return /\?$/.test(t) || /^(who|what|why|how|is|are|can|should|do|tell)\b/i.test(t.trim());
}
function unclearQuestion(t){
  const clean = t.trim();
  return looksLikeQuestion(clean) && clean.split(/\s+/).length < 4;
}
function askedAboutSelf(t){
  return /\b(tell me about yourself|who are you|introduce yourself|about yourself)\b/i.test(t);
}
function askedHowMet(t){
  return /\b(how did you (meet|met)|how you (meet|met)|how y'all met|how did you and andrew-?la meet)\b/i.test(t);
}
function askedHowDoing(t){
  return /\b(how is (she|andrew-?la)|how's (she|andrew-?la)|how is your girlfriend|how's your girlfriend|how is andrew-?la doing)\b/i.test(t);
}
function askedLove(t){
  return /\b(i'?m in love|in love|love her|love you|how much do you love|tell me you love|are you in love)\b/i.test(t);
}

/* Uses context to answer pronoun-y questions */
function specialReply(t){
  if (askedAboutSelf(t)) return aboutSelf();

  // If user says "how is she" after earlier Andrew-La talk, handle it
  if (askedHowDoing(t) || (/\bhow\b/i.test(t) && /\b(she|her)\b/i.test(t) && STATE.lastPerson === "andrew-la")) {
    STATE.lastTopic = "andrew-la";
    return pick(ANDREW_LA.howDoing);
  }

  if (askedHowMet(t) || (/\bmeet\b/i.test(t) && /\b(she|her)\b/i.test(t) && STATE.lastPerson === "andrew-la")) {
    STATE.lastTopic = "andrew-la";
    return pick(ANDREW_LA.howMet);
  }

  if (askedLove(t) && (STATE.lastPerson === "andrew-la" || /\b(she|her|girlfriend|andrew-?la)\b/i.test(t))) {
    STATE.lastTopic = "andrew-la";
    return `Bro Iâ€™m down horrendous. ${pick(ANDREW_LA.cheesy)}`;
  }

  // soft contextual prompt injection
  if ((STATE.lastTopic === "andrew-la" || STATE.lastPerson === "andrew-la") && Math.random() < 0.18 && !looksLikeQuestion(t)) {
    return pick(ANDREW_LA.prompts);
  }

  return null;
}

/* more coherent â€œconversation-yâ€ fallback */
function contextualFallback(userText){
  // try to follow up on last topic instead of random dodge
  if (STATE.lastTopic === "andrew-la") {
    const followups = [
      "You want the short version of the lore, or the full cinematic cut? ðŸ˜­",
      "Be honestâ€”do you ship it or nah?",
      "Should I tell you what sheâ€™s building right now?",
      "Okay but are we talking â€˜cute coupleâ€™ or â€˜Minecraft power coupleâ€™?"
    ];
    return pick(followups);
  }

  // if the user said something emotional / opinionated, mirror it a bit
  if (/\b(i feel|i'm stressed|i'm tired|i'm mad|i hate|i love)\b/i.test(userText.toLowerCase())) {
    const mirrors = [
      "Okay waitâ€”whatâ€™s the main thing making you feel that way?",
      "Thatâ€™s real. What happened that set it off?",
      "I hear you. What do you want to do about it?"
    ];
    return pick(mirrors);
  }

  // otherwise: gentle follow-up
  const generics = [
    "Alright, give me one more detailâ€”then I got you.",
    "Okay bet. Whatâ€™s the outcome you want?",
    "Facts. Keep goingâ€”whatâ€™s the missing piece?"
  ];
  return pick(generics);
}

function reply(raw){
  // Update focus + resolve pronouns using memory
  updateFocusFromText(raw);
  const t = resolvePronouns(raw);

  const s = specialReply(t);
  if (s) return s;

  const r = Math.random();

  if (unclearQuestion(t)) return pick(VOICE.yesno);

  if (looksLikeQuestion(t)){
    // make questions feel less random by preferring helpful/curious
    if (r < 0.45) return pick(VOICE.curious);
    if (r < 0.80) return pick(VOICE.helpful);
    if (r < 0.92) return pick(VOICE.funny);
    return pick(VOICE.rage);
  }

  // Non-question: try contextual follow-up first (conversation continuity)
  if (r < 0.55) return contextualFallback(t);

  // Still keep some flavor randomness
  if (r < 0.70) return pick(VOICE.funny);
  if (r < 0.85) return pick(VOICE.curious);
  if (r < 0.95) return pick(VOICE.helpful);
  return pick(VOICE.rage);
}

/* submit */
form.onsubmit=e=>{
  e.preventDefault();
  const t=input.value.trim();
  if(!t) return;

  add('user', t);
  remember('user', t);

  input.value='';

  setTimeout(()=>{
    const a = reply(t);
    add('ai', a);
    remember('ai', a);
  }, 350);
};

add('ai',"Yo â€” Iâ€™m Andrew AI. What's up!");
</script>
</body>
</html>
